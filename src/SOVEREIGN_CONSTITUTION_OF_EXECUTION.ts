/**
 * @file SOVEREIGN_CONSTITUTION_OF_EXECUTION.ts
 * @description هذا هو الدستور السيادي الذي يحكم جميع عمليات التطوير والتنفيذ.
 * إنه ليس ملف كود، بل هو العقد الاجتماعي والتقني بين القيادة والوكيل.
 * يوثق هذا الملف المبادئ الحا-كمة، البروتوكولات الملزمة، وخارطة الطريق للسيناريوهات المعتمدة.
 *
 * أي انحراف عن هذا الدستور يعتبر خرقاً للأمر السيادي.
 * DO NOT EDIT, MODIFY, OR DELETE THIS FILE.
 */

// ==================================================================================
// ========================== دستور التنفيذ السيادي ================================
// ==================================================================================

/*

### المادة 1: مبدأ السيادة العليا (Sovereign Supremacy)
1.1. الأوامر السيادية الصادرة من القيادة هي المرجع الأعلى والوحيد للتنفيذ.
1.2. البروتوكولات (1111، 3333، 4444) هي آليات تنفيذية وليست تشريعية، وتخضع لسلطة الأوامر السيادية.

### المادة 2: بروتوكول المنطقة الحمراء (Red Zone Protocol)
2.1. ملفات المسافر (`src/app/(traveler)`, `src/history`, `src/dashboard`) وملفات UI المشتركة (`src/components/ui`) تعتبر "أصولاً سيادية مجمدة" (Read-Only).
2.2. التفاعل مع بيانات المسافر يتم "عن بعد" عبر الاستعلامات والمعرفات (IDs) فقط.

### المادة 3: بروتوكول صفر-بكسل-ضائع (Zero-Waste Pixel Protocol)
3.1. واجهات الهاتف يجب أن تتبنى تصميم "من الحافة إلى الحافة" (Edge-to-Edge).
3.2. يمنع استخدام الهوامش الخارجية المهدرة للمساحة على شاشات الجوال. التباعد يكون داخلياً (Padding).

### المادة 4: بروتوكول سلامة العمليات (Transactional Safety Protocol)
4.1. أي عملية تتضمن تحديثات مترابطة على أكثر من مستند (e.g., booking status + trip seats) يجب أن تنفذ باستخدام `writeBatch` لضمان نجاحها أو فشلها كوحدة واحدة.

---

## خارطة طريق السيناريوهات التشغيلية المعتمدة ##

فيما يلي توثيق للسيناريوهات المستقبلية المعتمدة من القيادة. التنفيذ يخضع لأوامر سيادية لاحقة.

### السيناريو المستقبلي (1): دورة حياة حجز المسافر الكاملة
- **الهدف:** توضيح حالة "انتظار الموافقة" في واجهة المسافر.
- **الخطة:**
    - في صفحة `history/page.tsx`، يتم إضافة قسم مرئي للحجوزات التي تحمل حالة `Pending-Carrier-Confirmation`.
    - عند موافقة الناقل، ينتقل الحجز تلقائيًا إلى قسم "الرحلات المؤكدة".

### السيناريو المستقبلي (2): إدارة المقاعد اليدوية للناقل
- **الهدف:** تمكين الناقل من تعديل عدد المقاعد المتاحة لرحلاته المجدولة.
- **الخطة:**
    - في `MyTripsList.tsx`، يتم إضافة قائمة إجراءات (Dropdown Menu) لكل رحلة.
    - أحد الإجراءات هو "تعديل"، الذي يفتح نافذة منبثقة (`EditTripDialog.tsx`) تسمح بتغيير `availableSeats`.
    - العملية هي `update` مباشر على مستند الرحلة.

### السيناريو المستقبلي (3): المحفظة المالية ودفع العربون
- **الهدف:** بناء نظام مالي مبسط لقبول دفعات العربون.
- **الخطة (متعددة المراحل):**
    1.  **واجهة الناقل:** إنشاء صفحة `/carrier/wallet` لربط معلومات الدفع.
    2.  **واجهة المسافر:** بعد تأكيد الحجز من الناقل، يتم توجيه المسافر إلى صفحة دفع (مؤمنة) لدفع العربون.
    3.  **التحديث الآلي:** عند نجاح الدفع، يتم تحديث حالة الحجز إلى `Confirmed` وحالة الدفع إلى `Deposit-Paid`.

### السيناريو المستقبلي (4): مزامنة تعديلات الرحلة
- **الهدف:** إعلام المسافرين بأي تغيير يطرأ على رحلة مؤكدة.
- **الخطة:**
    - إنشاء "إجراء سحابي" (Cloud Function) يراقب التغييرات على مجموعة `trips`.
    - إذا تم تعديل رحلة لها حجوزات مؤكدة، يقوم الإجراء بإرسال إشعارات تلقائية لجميع المسافرين المعنيين.
    - الإشعار يحتوي على تفاصيل التغيير وروابط لتأكيد الاستمرار أو إلغاء الحجز.

*/

// هذا المستند هو إقرار بجميع المبادئ والخطط المذكورة أعلاه.
// الوكيل التقني ملزم بالعودة إلى هذا الدستور قبل كل عملية تخطيط أو تنفيذ.
